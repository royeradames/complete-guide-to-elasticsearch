- [Specifying the result format](#specifying-the-result-format)
  - [yaml](#yaml)
  - [pretty](#pretty)
- [Source filtering](#source-filtering)
  - [_source](#_source)
- [Specifying the result(_source) size](#specifying-the-result_source-size)
- [Specifying an offset](#specifying-an-offset)
- [Pagination](#pagination)

# Specifying the result format

## yaml

```JSON
# get yaml instead of json
GET recipe/_search?format=yaml
{
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}
```

## pretty

`<index>/_search?pretty`

Useful in terminal. Get your response formatted.

![without prettier](pictures/10.controlling-query-results/without-prettier.png)

![with prettier](pictures/10.controlling-query-results/with-pretty-1.png)
![with prettier](pictures/10.controlling-query-results/with-pretty-2.png)

# Source filtering

Expecify the fields to be selected

## _source

- `_source: false` You can desable the source field.
  - Then it will only return the _id, and you can look up the id in another db
  - Increases throughput
- `_source: [<name of field>]`
  - Only return the listed field name
- `_source: { include: [], excludes: []}`

```JSON
# source filtering #
# exclude and include
GET recipe/_search
{
  "_source": {
    "includes": "ingredients.*",
    "excludes": "ingredients.name"
  }, 
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}
# wildcards
# only have selected field
GET recipe/_search
{
  "_source": ["ingredients.*"],
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}
# only have selected field
GET recipe/_search
{
  "_source": ["created"],
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}

# disable _source
GET recipe/_search
{
  "_source": false,
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}

# get yaml instead of json
GET recipe/_search?format=yaml
{
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}
```

# Specifying the result(_source) size

Like a sql limit

```JSON
# default is 10
GET recipe/_search?size=2
{
  "_source": false,
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}

GET recipe/_search
{
  "size": 2, 
  "_source": false,
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}
```

# Specifying an offset

From the total list start from the doc index number.

- Defaults 0
- Count start from 0

```JSON
# defaults 0
# count start from 0
# A pagination component keep track of the from and sets the size
GET recipe/_search
{
  "_source": false,
  "size": 2,
  "from": 0, 
  "query": {
    "match": {
      "title": "pasta"
    }
  }
}
```

# Pagination
