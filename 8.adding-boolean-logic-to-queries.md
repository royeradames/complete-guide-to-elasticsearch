
- [Introudction to compound queries](#introudction-to-compound-queries)
- [Querying with boolean logic](#querying-with-boolean-logic)
- [Debuggin bool queries with named queries](#debuggin-bool-queries-with-named-queries)
- [How the "match" query works](#how-the-match-query-works)

# Introudction to compound queries

![leaf vs compound queries](pictures/8.adding-boolean-logic-to-queries/leaf-vs-compound-query.png)

Compound queries wraps leaf queries or more compound queries into a single operation.

# Querying with boolean logic

- Like the where clause in sql + deals with _score and score boosting. boost their brain development
- Can be use with the query or filter context
- Array is not needed if you only have 1 input
- The score from each matching must or should clause will be**added together to provide the final _score**for each document.

- Fields
  - must:
    - require to match all fields given, and rank by how well it matches.
    - Give range query a score of 1 by default
  - filter:
    - For the fields match or not
    - Can be catch
  - should:
    - boost score if they match but not require.
    - Great field to define preferences.
    - If there is no must or filter, at least 1 is require
  - must_not:
    - executed in the filter context
    - scoring is ignore and score of 0 is return for all matching docs
    - Queries are consider for catching

    -

[Boolean query](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html)

```JSON
GET recipe/_search
{
  "query": {
    "bool": {
      "must": [
        {
          "match": {
            "ingredients.name": "parmesan"
          }
        }
      ],
      "must_not": [
        {
          "match": {
            "ingredients.name": "tuna"
          }
        }
      ],
      "should": [
        {
          "match": {
            "ingredients.name": "parsley"
          }
        }
      ], 
      "filter": [
        {
          "range": {
            "preparation_time_minutes": {
              "lte": 15
            }
          }
        }
      ]
    }
  }
}

GET recipe/_search
{
  "query": {
    "bool": {
      "should": [
        {
          "match": {
            "ingredients.name": "parmesan"
          }
        }
      ]
    }
  }
}
```

# Debuggin bool queries with named queries

# How the "match" query works
